<!--pages/Cart/index.wxml-->
<view class="cart">
	<!-- 添加地址 -->
	<view class="addAddress">
		<button type="primary" plain bindtap="handleChooseAddress" wx:if="{{!address.userName}}">添加收货地址</button>
		<view wx:else class="address">
			<view class="receiver"><text>收货人： {{address.userName}}</text>
				<text>{{address.telNumber}}</text></view>
			<view>收货地址： {{address.all}}</view>
		</view>
	</view>
	<view class="shopCart">
		<view class="title">购物车</view>

		<!-- 产品列表 -->
		<block wx:if="{{cart.length!=0}}">
			<view class="goodsList" wx:for="{{cart}}" wx:key="index">
				<!-- 复选框绑定事件是给其父元素绑定 -->
				<checkbox-group bindtap="handleItemCheck" data-id="{{item.goods_id}}">
					<checkbox checked="{{item.checked}}" />
				</checkbox-group>
				<navigator class="left"  url="/pages/goods_detail/index?goods_id={{item.goods_id}}" >
					<image mode="widthFix" src="{{item.goods_small_logo}}"></image>
				</navigator>
				<view class="right">
					<view class="good_name">{{item.goods_name}}</view>
					<view class="bottom">
						<view class="good_price"><text>￥</text>{{item.goods_price}}</view>
						<view class="numChange">
							<view class="minus" bindtap="handleItemNum" data-id="{{item.goods_id}}" data-operation="{{-1}}">-</view>
							<view class="num">{{item.num}}</view>
							<view class="add" bindtap="handleItemNum" data-id="{{item.goods_id}}" data-operation="{{1}}">+</view>
						</view>
					</view>
				</view>
			</view>
		</block>
		<!-- 没有产品时 -->
		<view wx:else>
			<image src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1583174226057&di=39358572332253c90ff00007782dd404&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Fe1b1467beea0a9c7d6a56b32bac6d7e5dcd914f7c3e6-YTwUd6_fw658"></image>
		</view>
	</view>

	<!-- 底部结算 -->
	<view class="getSum">
		<checkbox-group bindtap="handleAllCheck">
			<checkbox checked="{{allChecked}}" />全选
		</checkbox-group>
		<view class="sum">
			<view class="total">合计：<text class=".good_price">￥{{totalPrice}}</text></view>
			<view class="delivery">包含运费</view>
		</view>
		<view class="toPay" bindtap="handlePay">
			结算 ( {{totalNum}} )
		</view>
	</view>
</view>